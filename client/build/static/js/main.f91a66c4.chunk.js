(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{68:function(t,e,n){},70:function(t,e,n){},71:function(t,e,n){},72:function(t,e,n){},73:function(t,e,n){},74:function(t,e,n){},75:function(t,e,n){},76:function(t,e,n){},77:function(t,e,n){},78:function(t,e,n){},79:function(t,e,n){},80:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),o=n(21),a=n.n(o),s=n(5),i=n(15),u=n(3),d=n(6),l=n(22),j=n(4),b=n.n(j),O=n(7),f=n(35),p=n.n(f).a.create({baseURL:"/",withCredentials:!0});p.interceptors.request.use((function(t){return t.headers.authorization=localStorage.token,t}),(function(t){return Promise.reject(t)}));var m=p,h={register:function(t,e,n){return m.post("/auth/register",{name:t,email:e,password:n}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},login:function(t,e){return m.post("/auth/login",{email:t,password:e}).then((function(t){return t.data})).catch((function(t){return t.response.data}))},verify:function(){return m.get("/auth/verify").then((function(t){return t.data}))}},x={isAuth:!1,errors:{login:"",register:""}},v="todo/auth/SET_IS_AUTH",_="todo/auth/SET_ERROR",g=function(t){return{type:v,payload:{auth:t}}},N=function(t){return{type:_,payload:{error:t}}},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return Object(d.a)(Object(d.a)({},t),{},{isAuth:e.payload.auth});case _:return Object(d.a)(Object(d.a)({},t),{},{errors:e.payload.error});default:return t}},w=function(t){return t.auth.isAuth},T=function(t){return t.auth.errors},E=(n(68),n(2)),C=function(){var t=Object(s.b)(),e=Object(s.c)(T),n=Object(l.a)(),r=n.register,o=n.handleSubmit,a=n.watch,i=n.formState.errors,u=n.setError;return Object(c.useEffect)((function(){u("password",{type:"server",message:e.login})}),[e.login]),Object(E.jsxs)("section",{className:"login",children:[Object(E.jsx)("h1",{className:"login__title",children:"Login"}),Object(E.jsxs)("form",{className:"form",onSubmit:o((function(){var e,n;t((e=a("email"),n=a("password"),function(){var t=Object(O.a)(b.a.mark((function t(c){var r,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.login(e,n);case 2:0===(r=t.sent).code?(localStorage.setItem("token",r.token),c(g(!0))):(o={login:r.message,register:""},c(N(o)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))})),children:[Object(E.jsx)("input",Object(d.a)({className:"form__input",type:"email",placeholder:"email"},r("email"))),Object(E.jsx)("input",Object(d.a)({className:"form__input",type:"password",placeholder:"password"},r("password"))),Object(E.jsx)("button",{className:"form__btn",type:"submit"})]}),Object(E.jsx)("div",{className:"login__error",children:i.password&&i.password.message})]})},k=(n(70),function(){var t=Object(s.b)(),e=Object(s.c)(T),n=Object(l.a)(),r=n.register,o=n.handleSubmit,a=n.watch,i=n.setError,u=n.formState.errors;return Object(c.useEffect)((function(){i("password",{type:"server",message:e.register})}),[e.register]),Object(E.jsxs)("section",{className:"register",children:[Object(E.jsx)("h1",{className:"register__title",children:"Register"}),Object(E.jsxs)("form",{className:"form",onSubmit:o((function(){var e,n,c;t((e=a("name"),n=a("email"),c=a("password"),function(){var t=Object(O.a)(b.a.mark((function t(r){var o,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.register(e,n,c);case 2:0===(o=t.sent).code?(localStorage.setItem("token",o.token),r(g(!0))):(a={login:"",register:o.message},r(N(a)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))})),children:[Object(E.jsx)("input",Object(d.a)({className:"form__input",type:"email",placeholder:"email"},r("email"))),Object(E.jsx)("input",Object(d.a)({className:"form__input",type:"password",placeholder:"password"},r("password"))),Object(E.jsx)("input",Object(d.a)({className:"form__input",type:"text",placeholder:"name"},r("name"))),Object(E.jsx)("button",{className:"form__btn",type:"submit"})]}),Object(E.jsx)("div",{className:"register__error",children:u.password&&u.password.message})]})}),S=n(8),D={createTodo:function(t,e){return m.post("/todo",{description:t,date:e}).then((function(t){return t.data}))},getAllTodos:function(t){return m.get("/todo/".concat(t)).then((function(t){return t.data}))},getTodoById:function(t){return m.get("/todo/".concat(t)).then((function(t){return t.data}))},removeTodo:function(t){return m.delete("/todo/".concat(t)).then((function(t){return t.data}))},changeTodo:function(t,e,n){return m.put("/todo/".concat(t),{description:e,solved:n}).then((function(t){return t.data}))},getOldTodosCount:function(t){return m.get("/todo/old/".concat(t)).then((function(t){return t.data}))},removeOldTodos:function(t){return m.delete("/todo/old/".concat(t)).then((function(t){return t.data}))},getSolvedCount:function(t){return m.get("/todo/statistics/count?solved=".concat(t)).then((function(t){return t.data}))}},A=function(t){var e="".concat(t.getFullYear()).concat(t.getMonth()).concat(t.getDate());return Number(e)},R={todos:[],selectedDate:new Date,oldTodos:0,completedCount:0,incompletedCount:0},I="todo/todo/SET_TODOS",L="todo/todo/ADD_TODO",M="todo/todo/REMOVE_TODO",G="todo/todo/CHANGE_TODO",H="todo/todo/CHANGE_SELECTED_DATE",U="todo/todo/GET_OLD_TODOS_COUNT",B="todo/todo/CHANGE_COMPLETED_COUNT",F="todo/todo/CHANGE_INCOMPLETED_COUNT",P=function(t){return{type:I,payload:{todos:t}}},W=function(t){return{type:L,payload:{todo:t}}},J=function(t){return{type:M,payload:{todo:t}}},q=function(t){return{type:G,payload:{todo:t}}},z=function(t){return{type:H,payload:{date:t}}},V=function(t){return{type:U,payload:{count:t}}},Y=function(t){return{type:B,payload:{count:t}}},K=function(t){return{type:F,payload:{count:t}}},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case B:return Object(d.a)(Object(d.a)({},t),{},{completedCount:e.payload.count});case F:return Object(d.a)(Object(d.a)({},t),{},{incompletedCount:e.payload.count});case I:return Object(d.a)(Object(d.a)({},t),{},{todos:e.payload.todos});case L:return Object(d.a)(Object(d.a)({},t),{},{todos:[].concat(Object(S.a)(t.todos),[e.payload.todo])});case M:return Object(d.a)(Object(d.a)({},t),{},{todos:Object(S.a)(t.todos.filter((function(t){return t.todo_id!==e.payload.todo.todo_id})))});case G:return Object(d.a)(Object(d.a)({},t),{},{todos:Object(S.a)(t.todos.map((function(t){return t.todo_id===e.payload.todo.todo_id?e.payload.todo:t})))});case H:return Object(d.a)(Object(d.a)({},t),{},{selectedDate:e.payload.date});case U:return Object(d.a)(Object(d.a)({},t),{},{oldTodos:e.payload.count});default:return t}},X=function(t,e,n){return function(){var c=Object(O.a)(b.a.mark((function c(r){var o;return b.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,D.changeTodo(t,e,n);case 2:(o=c.sent)&&r(q(o));case 4:case"end":return c.stop()}}),c)})));return function(t){return c.apply(this,arguments)}}()},Z=function(t){return t.todo.todos},$=function(t){return t.todo.selectedDate},tt=function(t){return t.todo.oldTodos},et=function(t){return t.todo.completedCount},nt=function(t){return t.todo.incompletedCount},ct=(n(71),function(){return Object(E.jsx)("div",{className:"statistics",children:Object(E.jsxs)("ul",{className:"statistics__list",children:[Object(E.jsx)("li",{className:"statistics__item",children:Object(E.jsx)(rt,{})}),Object(E.jsx)("li",{className:"statistics__item",children:Object(E.jsx)(ot,{})}),Object(E.jsx)("li",{className:"statistics__item",children:Object(E.jsx)(at,{})})]})})}),rt=function(){var t=Object(s.b)(),e=Object(s.c)(tt);Object(c.useEffect)((function(){var e;t((e=new Date,function(){var t=Object(O.a)(b.a.mark((function t(n){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getOldTodosCount(A(e));case 2:(c=t.sent)&&n(V(c.count));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[]);return Object(E.jsxs)("section",{className:"statistics-item",children:[Object(E.jsx)("h2",{className:"statistics-item__title",children:"Number of old todos:"}),Object(E.jsx)("span",{className:"statistics-item__count",children:e}),Object(E.jsx)("span",{className:"statistics-item__clear-btn",onClick:function(){var e;t((e=new Date,function(){var t=Object(O.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.removeOldTodos(A(e));case 2:0===t.sent.code&&n(V(0));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))},children:"remove all"})]})},ot=function(){var t=Object(s.b)(),e=Object(s.c)(et);return Object(c.useEffect)((function(){t(function(){var t=Object(O.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getSolvedCount(!0);case 2:(n=t.sent)&&e(Y(n.count));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(E.jsxs)("section",{className:"statistics-item",children:[Object(E.jsx)("h2",{className:"statistics-item__title",children:"Number of completed todos:"}),Object(E.jsx)("span",{className:"statistics-item__count",children:e})]})},at=function(){var t=Object(s.b)(),e=Object(s.c)(nt);return Object(c.useEffect)((function(){t(function(){var t=Object(O.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getSolvedCount(!1);case 2:(n=t.sent)&&e(K(n.count));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(E.jsxs)("section",{className:"statistics-item",children:[Object(E.jsx)("h2",{className:"statistics-item__title",children:"Number of incompleted todos:"}),Object(E.jsx)("span",{className:"statistics-item__count",children:e})]})},st=(n(72),n(39)),it=(n(73),n(9)),ut=(n(74),n(36)),dt=n.n(ut),lt=function(t){var e=t.description,n=t.todo,r=Object(c.useState)(e),o=Object(it.a)(r,2),a=o[0],i=o[1],u=Object(s.b)(),d=dt()({"todo-list__item":!0,"todo-list__item--solved":n.solved});return Object(E.jsxs)("li",{className:d,children:[Object(E.jsx)("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:function(t){return i(t.currentTarget.innerText)},onBlur:function(){u(X(n.todo_id,a,n.solved))},className:"todo-list__item-text",children:e}),Object(E.jsx)("span",{className:"todo-list__item-solve-btn",onClick:function(){u(X(n.todo_id,a,!n.solved))}}),Object(E.jsx)("span",{className:"todo-list__item-delete-btn",onClick:function(){var t;u((t=n.todo_id,function(){var e=Object(O.a)(b.a.mark((function e(n){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.removeTodo(t);case 2:(c=e.sent)&&n(J(c));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})]})},jt=r.a.memo(lt),bt=function(){var t=Object(s.c)(Z);return Object(E.jsx)("ul",{className:"todo-list",children:t.map((function(t){return Object(E.jsx)(jt,{description:t.description,todo:t},t.todo_id)}))})},Ot=(n(75),function(){var t=Object(s.b)(),e=Object(s.c)($),n=Object(c.useState)(""),r=Object(it.a)(n,2),o=r[0],a=r[1],i=function(n){var c,r;""!==n.currentTarget.innerText&&t((c=o,r=e,function(){var t=Object(O.a)(b.a.mark((function t(e){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.createTodo(c,A(r));case 2:(n=t.sent)&&e(W(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),n.currentTarget.innerText=""};return Object(E.jsx)("div",{className:"add-todo",contentEditable:!0,suppressContentEditableWarning:!0,onInput:function(t){return a(t.currentTarget.innerText)},onBlur:function(t){return i(t)},children:""})}),ft=function(){var t=Object(s.b)(),e=Object(s.c)($);Object(c.useEffect)((function(){var n;t((n=e,function(){var t=Object(O.a)(b.a.mark((function t(e){var c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getAllTodos(A(n));case 2:(c=t.sent)&&e(P(c));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[e]);return Object(E.jsxs)("section",{className:"todo",children:[Object(E.jsx)("div",{className:"todo__calendar-img"}),Object(E.jsx)(st.a,{value:e,onChange:function(e){t(z(e))}}),Object(E.jsx)(bt,{}),Object(E.jsx)(Ot,{})]})},pt=function(){var t=Object(s.c)(w);return Object(E.jsxs)(u.d,{children:[Object(E.jsx)(u.b,{path:"/auth/login",element:t?Object(E.jsx)(u.a,{to:"/todo"}):Object(E.jsx)(C,{})}),Object(E.jsx)(u.b,{path:"/auth/register",element:t?Object(E.jsx)(u.a,{to:"/todo"}):Object(E.jsx)(k,{})}),Object(E.jsx)(u.b,{path:"/todo",element:t?Object(E.jsx)(ft,{}):Object(E.jsx)(u.a,{to:"/auth/login"})}),Object(E.jsx)(u.b,{path:"/statistics",element:t?Object(E.jsx)(ct,{}):Object(E.jsx)(u.a,{to:"/auth/login"})}),Object(E.jsx)(u.b,{path:"/",element:Object(E.jsx)(u.a,{to:"/todo"})})]})},mt=(n(76),function(t){var e=t.children;return Object(E.jsx)("div",{className:"board",children:e})}),ht=(n(77),function(){return Object(E.jsx)("footer",{className:"footer",children:Object(E.jsx)("p",{children:"\xa9 Copyright 2021. All Rights Reserved."})})}),xt=(n(78),function(){var t=Object(s.b)(),e=Object(s.c)(w);return Object(E.jsxs)("header",{className:"header",children:[Object(E.jsx)("div",{className:"logo",children:Object(E.jsx)(i.b,{className:"logo__link",to:"/todo",children:"TODOshka"})}),Object(E.jsx)("nav",{className:"nav",children:Object(E.jsx)("ul",{className:"nav__list",children:e?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("li",{className:"nav__item",children:Object(E.jsx)(i.b,{className:"nav__link",to:"/statistics",children:"statistics"})}),Object(E.jsx)("li",{className:"nav__item",children:Object(E.jsx)("span",{className:"header__auth-logout",onClick:function(){localStorage.clear(),t(g(!1))},children:"logout"})})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("li",{className:"nav__item",children:Object(E.jsx)(i.b,{className:"nav__link",to:"/auth/login",children:"login"})}),Object(E.jsx)("li",{className:"nav__item",children:Object(E.jsx)(i.b,{className:"nav__link",to:"/auth/register",children:"register"})})]})})})]})}),vt=function(t){t.children;return Object(E.jsx)("div",{className:"layout",children:Object(E.jsxs)("div",{className:"container",children:[Object(E.jsxs)("div",{className:"wrapper",children:[Object(E.jsx)(xt,{}),Object(E.jsx)(mt,{children:Object(E.jsx)(pt,{})})]}),Object(E.jsx)(ht,{})]})})},_t=function(){var t=Object(s.b)();return Object(c.useEffect)((function(){t(function(){var t=Object(O.a)(b.a.mark((function t(e){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.verify();case 2:t.sent&&e(g(!0));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(E.jsx)("main",{className:"main",children:Object(E.jsx)(vt,{})})},gt=n(18),Nt=n(37),yt=n(38),wt=Object(gt.combineReducers)({auth:y,todo:Q}),Tt=Object(gt.createStore)(wt,Object(Nt.composeWithDevTools)(Object(gt.applyMiddleware)(yt.a)));n(79);a.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(i.a,{children:Object(E.jsx)(s.a,{store:Tt,children:Object(E.jsx)(_t,{})})})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.f91a66c4.chunk.js.map